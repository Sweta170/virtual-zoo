{% extends 'zoo/base.html' %}
{% load static %}
{% block content %}
<style>
  body.dark-mode .details-card,
  body.dark-mode .animal-section,
  body.dark-mode .description-card {
    background: #23272f !important;
    color: #f1f1f1 !important;
    border-color: #343a40 !important;
    box-shadow: 0 4px 24px rgba(0,0,0,0.18);
  }
  body.dark-mode .animal-details-list li,
  body.dark-mode .animal-description {
    color: #e0e0e0 !important;
  }
  body.dark-mode .animal-hero-overlay {
    background: linear-gradient(90deg, rgba(30,41,59,0.85) 0%, rgba(99,102,241,0.2) 100%);
    color: #fff !important;
  }
  body.dark-mode .description-card {
    background: #23272f !important;
    color: #e0e0e0 !important;
    border-color: #343a40 !important;
  }
  .details-card, .animal-section, .description-card {
    transition: background 0.3s, color 0.3s, border-color 0.3s;
  }
  .animal-details-list li, .animal-description {
    word-break: break-word;
    white-space: pre-line;
    line-height: 1.7;
    font-size: 1.05rem;
    text-align: justify;
  }
  .animal-description {
    padding: 0.2rem 0.1rem;
    border-radius: 0.3rem;
    background: rgba(0,0,0,0.02);
    margin-bottom: 0.5rem;
  }
  .animal-hero {
    position: relative;
    width: 100%;
    height: 340px;
    background: #e0e7ef;
    border-radius: 1.5rem;
    overflow: hidden;
    margin-bottom: 2rem;
    box-shadow: 0 6px 32px rgba(0,0,0,0.10);
  }
  .animal-hero img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: brightness(0.85);
    border-radius: 1.5rem;
  }
  .animal-hero-overlay {
    position: absolute;
    left: 0; top: 0; width: 100%; height: 100%;
    background: linear-gradient(90deg, rgba(99,102,241,0.7) 0%, rgba(99,102,241,0.2) 100%);
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 2rem;
    color: #fff;
  }
  .animal-hero-title {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
    text-shadow: 0 2px 8px rgba(0,0,0,0.18);
  }
  .animal-hero-species {
    font-size: 1.2rem;
    font-weight: 500;
    opacity: 0.9;
  }
  .animal-section {
    background: #fff;
    border-radius: 1.2rem;
    box-shadow: 0 2px 16px rgba(99,102,241,0.07);
    padding: 2rem;
    margin-bottom: 2rem;
  }
  .animal-details-list {
    list-style: none;
    padding: 0;
    margin: 0;
  }
  .animal-details-list li {
    margin-bottom: 1rem;
    font-size: 1.08rem;
    display: flex;
    align-items: center;
  }
  .animal-details-list .icon {
    width: 28px;
    height: 28px;
    margin-right: 0.7rem;
    color: #6366f1;
    flex-shrink: 0;
  }
  .animal-action-btns {
    margin-top: 2rem;
    display: flex;
    gap: 1rem;
  }
  .animal-action-btns .btn {
    border-radius: 2rem;
    font-weight: 600;
    padding: 0.5rem 1.5rem;
    box-shadow: 0 2px 8px rgba(99,102,241,0.08);
    transition: box-shadow 0.2s, background 0.2s;
  }
  .animal-action-btns .btn:hover {
    box-shadow: 0 4px 16px rgba(99,102,241,0.18);
  }
  @media (max-width: 991px) {
    .animal-hero { height: 180px; }
    .animal-section { padding: 1rem; }
    .animal-hero-title { font-size: 1.5rem; }
  }
</style>
<div class="fade-in">
  <div class="animal-hero">
    {% if animal.image %}
      <img src="{{ animal.image.url }}" alt="{{ animal.name }}">
    {% else %}
      <img src="{% static 'zoo/no-image.png' %}" alt="No image">
    {% endif %}
    <div class="animal-hero-overlay">
      <div class="animal-hero-title">{{ animal.name }}</div>
      <div class="animal-hero-species">{{ animal.species }}{% if animal.scientific_name %} &mdash; <em>{{ animal.scientific_name }}</em>{% endif %}</div>
    </div>
  </div>
  <div class="row g-4">
    <div class="d-flex flex-row flex-nowrap justify-content-start align-items-start w-100" style="gap: 1.5rem;">
      <div class="details-card" style="min-width:340px;max-width:520px;width:480px;flex:0 0 480px;align-self:flex-start;background:#fff;border-radius:0.8rem;border:1px solid #e3e3e3;box-shadow:0 4px 24px rgba(0,0,0,0.08);overflow:hidden;margin-left:0;">
        <div class="p-4">
          <div class="d-flex align-items-center mb-3">
            <span class="me-2" style="font-size:1.3rem;color:#3b82f6;"><i class="icon bi bi-info-circle-fill"></i></span>
            <h4 class="mb-0 fw-bold" style="color:#3b82f6;font-size:1.1rem;">Details</h4>
          </div>
          <ul class="animal-details-list mb-0" style="word-break:break-word;white-space:pre-line;list-style:none;padding-left:0;font-size:0.97rem;">
            <li class="mb-2"><i class="icon bi bi-tag-fill text-secondary"></i> <strong>Category:</strong> <span>{{ animal.category.name }}</span></li>
            <li class="mb-2"><i class="icon bi bi-geo-alt-fill text-danger"></i> <strong>Zone:</strong> <span>{{ animal.zone.name }}</span></li>
            <li class="mb-2"><i class="icon bi bi-egg-fill text-warning"></i> <strong>Diet:</strong> <span>{{ animal.diet }}</span></li>
            <li class="mb-2"><i class="icon bi bi-tree-fill text-success"></i> <strong>Habitat:</strong> <span>{{ animal.habitat }}</span></li>
            <li><i class="icon bi bi-lightbulb-fill text-info"></i> <strong>Fun facts:</strong> <span>{{ animal.fun_facts }}</span></li>
          </ul>
        </div>
        <div class="description-card mt-3" style="background:#f8f9fa;border-radius:0.7rem;border:1px solid #e3e3e3;box-shadow:0 2px 12px rgba(0,0,0,0.04);overflow:hidden;">
          <div class="p-4">
            <div class="d-flex align-items-center mb-3">
              <span class="me-2" style="font-size:1.1rem;color:#10b981;"><i class="icon bi bi-file-earmark-text-fill"></i></span>
              <h4 class="mb-0 fw-bold" style="color:#10b981;font-size:1.05rem;">Description</h4>
            </div>
            <div class="animal-description">
              {{ animal.description }}
            </div>
          </div>
        </div>
      </div>
      <div class="media-card" style="min-width:320px;max-width:600px;flex:1;align-self:flex-start;display:flex;flex-direction:column;align-items:end;">
        <div class="animal-section w-100">
          <h4 class="mb-3"><i class="icon bi bi-camera-video"></i> Media</h4>
          <div class="d-flex flex-row flex-wrap align-items-stretch justify-content-end gap-4" style="min-height:120px;">
          {% if animal.sound %}
            <div class="mb-3 flex-fill d-flex flex-column align-items-center" style="min-width:220px;max-width:320px;">
              <label class="fw-bold mb-2"><i class="icon bi bi-volume-up"></i> Sound:</label>
              <audio controls style="width:100%;max-width:280px;">
                <source src="{{ animal.sound.url }}">
                Your browser does not support the audio element.
              </audio>
            </div>
          {% endif %}
          {% if animal.video %}
            <div class="mb-3 flex-fill d-flex flex-column align-items-center" style="min-width:320px;max-width:520px;">
              <label class="fw-bold mb-2"><i class="icon bi bi-play-btn"></i> Video:</label>
              <video controls style="width:100%;max-width:500px;" class="rounded">
                <source src="{{ animal.video.url }}">
                Your browser does not support the video tag.
              </video>
            </div>
          {% endif %}
          </div>
        </div>
        <div class="animal-action-btns">
          {% if user.is_authenticated %}
            <a href="{% url 'favorite_toggle' animal.pk %}" class="btn btn-outline-danger animate__animated animate__pulse animate__infinite">{% if is_fav %}Unfavorite{% else %}Favorite{% endif %}</a>
            <a href="{% url 'submit_feedback' %}?animal={{ animal.pk }}" class="btn btn-outline-primary">Feedback</a>
          {% else %}
            <a class="btn btn-outline-secondary" href="{% url 'login' %}?next={% url 'animal_detail' animal.pk %}">Login to interact</a>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Bootstrap Icons CDN -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
{% endblock %}
